- name: "Configure MATE Terminal app settings"
  block:
    - name: "In MATE Terminal app, set use-system-theme-colors 'false'"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/use-theme-colors"
        value: "false"
        state: present
    - name: "In MATE Terminal app, set background to '{{ bg_type }}'"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/background-type"
        value: "'{{ bg_type }}'"
        state: present
      vars:
        bg_type: "{{ 'solid' if (terminal_bg_transparency == '1.00') else 'transparent' }}"
    - name: "In MATE Terminal app, set background transparency to {{ terminal_bg_transparency }}"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/background-darkness"
        value: "{{ terminal_bg_transparency }}"
        state: present
      when: terminal_bg_transparency != '1.00'
      changed_when: false
    - name: "In MATE Terminal app, set background color to '{{ terminal_bg_color }}'"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/background-color"
        value: "'{{ terminal_bg_color }}'"
        state: present
    - name: "In MATE Terminal app, set foreground/text color to '{{ terminal_fg_color }}'"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/foreground-color"
        value: "'{{ terminal_fg_color }}'"
        state: present
    - name: "In MATE Terminal app, set match-fg-text-for-bold-color to 'false'"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/bold-color-same-as-fg"
        value: "false"
        state: present
    - name: "In MATE Terminal app, text-bold-color to '{{ terminal_fg_bold_color }}'"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/bold-color"
        value: "'{{ terminal_fg_bold_color }}'"
        state: present
    - name: "In MATE Terminal app, set cursor-blink to '{{ terminal_cursor_blink }}'"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/cursor-blink-mode"
        value: "'{{ terminal_cursor_blink }}'"
        state: present
    - name: "In MATE Terminal app, set use-system-font to '{{ use_sys_font }}'"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/use-system-font"
        value: "{{ use_sys_font }}"
        state: present
      vars:
        use_sys_font: (terminal_font == 'system')
    - name: "In MATE Terminal app, set font to '{{ terminal_font }}'"
      community.general.dconf:
        key: "/org/mate/terminal/profiles/default/font"
        value: "{{ terminal_font }}"
        state: present
      when: terminal_font != 'system'
  become: true
  become_user: "{{ user_name }}"

